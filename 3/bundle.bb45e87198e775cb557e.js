(()=>{"use strict";function e(e){const t=document.createElement("div");return t.innerHTML=e,t.firstElementChild}function t(e,t,n="beforeend"){t.insertAdjacentElement(n,e.getElement())}class n{getTemplate(){return'<form class="trip-filters" action="#" method="get">\n      <button class="visually-hidden" type="submit">Accept filter</button>\n    </form>'}getElement(){return this.element||(this.element=e(this.getTemplate())),this.element}removeElement(){this.element=null}}class s{constructor({filterData:e}){this.filterData=e}getTemplate(){return function(e){const{label:t,value:n,isActive:s,isDisabled:l}=e;return`<div class="trip-filters__filter">\n      <input id="filter-${n}" class="trip-filters__filter-input  visually-hidden" type="radio" name="trip-filter" value="${n}" ${s?"checked":""} ${l?"disabled":""}>\n      <label class="trip-filters__filter-label" for="filter-${n}">${t}</label>\n    </div>`}(this.filterData)}getElement(){return this.element||(this.element=e(this.getTemplate())),this.element}removeElement(){this.element=null}}const l=[{label:"Everything",value:"everything"},{label:"Future",value:"future"},{label:"Present",value:"present"},{label:"Past",value:"past"}];class i{getTemplate(){return'<form class="trip-events__trip-sort trip-sort" action="#" method="get"></form>'}getElement(){return this.element||(this.element=e(this.getTemplate())),this.element}removeElement(){this.element=null}}class a{constructor({sortingData:e}){this.sortingData=e}getTemplate(){return function(e){const{label:t,value:n,isActive:s,isDisabled:l}=e;return`<div class="trip-sort__item  trip-sort__item--${n}">\n      <input id="sort-${n}" class="trip-sort__input  visually-hidden" type="radio" name="trip-sort" value="sort-${n}" ${s?"checked":""} ${l?"disabled":""}>\n      <label class="trip-sort__btn" for="sort-${n}">${t}</label>\n    </div>`}(this.sortingData)}getElement(){return this.element||(this.element=e(this.getTemplate())),this.element}removeElement(){this.element=null}}const r=[{label:"Day",value:"day"},{label:"Event",value:"event"},{label:"Time",value:"time"},{label:"Price",value:"price"},{label:"Offers",value:"offer"}];class o{getTemplate(){return'<ul class="trip-events__list"></ul>'}getElement(){return this.element||(this.element=e(this.getTemplate())),this.element}removeElement(){this.element=null}}class m{getTemplate(){return'<li class="trip-events__item"></li>'}getElement(){return this.element||(this.element=e(this.getTemplate())),this.element}removeElement(){this.element=null}}const c=e=>{const t=new Date(e),n=t.getHours(),s=t.getMinutes();return`${n>9?n:`0${n}`}:${s>9?s:`0${s}`}`},h=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"];class p{constructor({eventData:e}){this.eventData=e}getTemplate(){return function(e){const{dateFrom:t,dateTo:n,destination:s,type:l,price:i}=e,a=(e=>{const t=new Date(e);return`${h[t.getMonth()]} ${t.getDate()}`})(t),r=c(t),o=c(n),m=((e,t)=>{const n=new Date(e),s=new Date(t),l=Math.abs(s-n),i=Math.floor(l/6e4);if(i<60)return`${i}M`;const a=Math.floor(i/60),r=Math.floor(a/24),o=a%24,m=i%60;return r>0?`${r}D ${o}H ${m}M`:`${o}H ${m}M`})(t,n);return`<div class="event">\n        <time class="event__date" datetime="${t.slice(0,10)}">${a}</time>\n        <div class="event__type">\n          <img class="event__type-icon" width="42" height="42" src="img/icons/${l}.png" alt="Event type icon">\n        </div>\n        <h3 class="event__title">${l} ${s}</h3>\n        <div class="event__schedule">\n          <p class="event__time">\n            <time class="event__start-time" datetime="${t}">${r}</time>\n            &mdash;\n            <time class="event__end-time" datetime="${n}">${o}</time>\n          </p>\n          <p class="event__duration">${m}</p>\n        </div>\n        <p class="event__price">\n          &euro;&nbsp;<span class="event__price-value">${i}</span>\n        </p>\n\n         \x3c!-- Offers --\x3e\n\n         \x3c!-- Favorite button --\x3e\n\n         \x3c!-- Rollup button --\x3e\n      </div>`}(this.eventData)}getElement(){return this.element||(this.element=e(this.getTemplate())),this.element}removeElement(){this.element=null}}class u{constructor({isFavorite:e}){this.isFavorite=e}getTemplate(){return`<button class="event__favorite-btn ${this.isFavorite?"event__favorite-btn--active":""}" type="button">\n          <span class="visually-hidden">Add to favorite</span>\n          <svg class="event__favorite-icon" width="28" height="28" viewBox="0 0 28 28">\n            <path d="M14 21l-8.22899 4.3262 1.57159-9.1631L.685209 9.67376 9.8855 8.33688 14 0l4.1145 8.33688 9.2003 1.33688-6.6574 6.48934 1.5716 9.1631L14 21z"/>\n          </svg>\n        </button>`}getElement(){return this.element||(this.element=e(this.getTemplate())),this.element}removeElement(){this.element=null}}class v{getTemplate(){return'<button class="event__rollup-btn" type="button">\n      <span class="visually-hidden">Open event</span>\n    </button>'}getElement(){return this.element||(this.element=e(this.getTemplate())),this.element}removeElement(){this.element=null}}class d{constructor({offerData:e}){this.offerData=e}getTemplate(){return function(e){const{title:t,price:n}=e;return`<li class="event__offer">\n      <span class="event__offer-title">${t}</span>\n      &plus;&euro;&nbsp;\n      <span class="event__offer-price">${n}</span>\n    </li>`}(this.offerData)}getElement(){return this.element||(this.element=e(this.getTemplate())),this.element}removeElement(){this.element=null}}class g{getTemplate(){return'<h4 class="visually-hidden">Offers:</h4>'}getElement(){return this.element||(this.element=e(this.getTemplate())),this.element}removeElement(){this.element=null}}class f{getTemplate(){return'<ul class="event__selected-offers"></ul>'}getElement(){return this.element||(this.element=e(this.getTemplate())),this.element}removeElement(){this.element=null}}class _{getTemplate(){return'<form class="event event--edit" action="#" method="post">\n        \x3c!-- Event header --\x3e\n\n        \x3c!-- Event details --\x3e\n      </form>'}getElement(){return this.element||(this.element=e(this.getTemplate())),this.element}removeElement(){this.element=null}}class E{getTemplate(){return'<header class="event__header">\n      \x3c!-- Type Wrapper --\x3e\n\n      \x3c!-- Field group destination --\x3e\n\n      \x3c!-- Field group time --\x3e\n\n      \x3c!-- Field group price --\x3e\n\n      \x3c!-- save button --\x3e\n\n      \x3c!-- reset button --\x3e\n\n      \x3c!-- rollup button --\x3e\n    </header>'}getElement(){return this.element||(this.element=e(this.getTemplate())),this.element}removeElement(){this.element=null}}class T{constructor({typeData:e}){this.typeData=e}getTemplate(){return function(e){const{id:t,type:n}=e;return`<div class="event__type-wrapper">\n      <label class="event__type  event__type-btn" for="event-type-toggle-${t}">\n        <span class="visually-hidden">Choose event type</span>\n        <img class="event__type-icon" width="17" height="17" src="img/icons/${n}.png" alt="Event type icon">\n      </label>\n      <input class="event__type-toggle  visually-hidden" id="event-type-toggle-${t}" type="checkbox">\n\n      \x3c!-- Event type list --\x3e\n    </div>`}(this.typeData)}getElement(){return this.element||(this.element=e(this.getTemplate())),this.element}removeElement(){this.element=null}}class ${getTemplate(){return'<div class="event__type-list"></div>'}getElement(){return this.element||(this.element=e(this.getTemplate())),this.element}removeElement(){this.element=null}}class b{getTemplate(){return'<fieldset class="event__type-group">\n      <legend class="visually-hidden">Event type</legend>\n\n      \x3c!-- Types list --\x3e\n\n    </fieldset>'}getElement(){return this.element||(this.element=e(this.getTemplate())),this.element}removeElement(){this.element=null}}class y{constructor({eventTypeData:e}){this.eventTypeData=e}getTemplate(){return function(e){const{name:t,id:n,label:s,isActive:l}=e;return`<div class="event__type-item">\n      <input id="event-type-${t}-${n}" class="event__type-input visually-hidden" type="radio" name="event-type" value="${t}" ${l?"checked":""}>\n      <label class="event__type-label event__type-label--${t}" for="event-type-${t}-${n}">${s}</label>\n    </div>`}(this.eventTypeData)}getElement(){return this.element||(this.element=e(this.getTemplate())),this.element}removeElement(){this.element=null}}class w{constructor({data:e}){this.data=e}getTemplate(){return function(e){const{id:t,type:n,destination:s}=e;return`<div class="event__field-group  event__field-group--destination">\n      <label class="event__label event__type-output" for="event-destination-${t}">${n}</label>\n      <input class="event__input event__input--destination" id="event-destination-${t}" type="text" name="event-destination" value="${s??""}" list="destination-list-${t}">\n\n      \x3c!-- Destination list --\x3e\n    </div>`}(this.data)}getElement(){return this.element||(this.element=e(this.getTemplate())),this.element}removeElement(){this.element=null}}class D{constructor({id:e}){this.id=e}getTemplate(){return`<datalist id="destination-list-${this.id}"></datalist>`}getElement(){return this.element||(this.element=e(this.getTemplate())),this.element}removeElement(){this.element=null}}class x{constructor({value:e}){this.value=e}getTemplate(){return`<option value="${this.value}"></option>`}getElement(){return this.element||(this.element=e(this.getTemplate())),this.element}removeElement(){this.element=null}}const C=e=>e<9?`0${e}`:e,F=e=>{const t=new Date(e);return`${C(t.getDate())}/${C(t.getMonth()+1)}/${t.getFullYear().toString().substr(-2)} ${C(t.getHours())}: ${C(t.getMinutes())}`};class A{constructor({data:e}){this.data=e}getTemplate(){return function(e){const{dateFrom:t,dateTo:n,id:s}=e;return`<div class="event__field-group  event__field-group--time">\n      <label class="visually-hidden" for="event-start-time-${s}">From</label>\n      <input class="event__input event__input--time" id="event-start-time-${s}" type="text" name="event-start-time" value="${F(t)}">\n      &mdash;\n      <label class="visually-hidden" for="event-end-time-${s}">To</label>\n      <input class="event__input event__input--time" id="event-end-time-${s}" type="text" name="event-end-time" value="${F(n)}">\n    </div>`}(this.data)}getElement(){return this.element||(this.element=e(this.getTemplate())),this.element}removeElement(){this.element=null}}class k{constructor({data:e}){this.data=e}getTemplate(){return function(e){const{price:t,id:n}=e;return`<div class="event__field-group  event__field-group--price">\n      <label class="event__label" for="event-price-${n}">\n        <span class="visually-hidden">Price</span>\n        &euro;\n      </label>\n      <input class="event__input  event__input--price" id="event-price-${n}" type="text" name="event-price" value="${t}">\n    </div>`}(this.data)}getElement(){return this.element||(this.element=e(this.getTemplate())),this.element}removeElement(){this.element=null}}class I{constructor({color:e}){this.color=e}getTemplate(){return`<button class="event__save-btn btn ${(e=this.color)?`btn--${e}`:""}" type="submit">Save</button>`;var e}getElement(){return this.element||(this.element=e(this.getTemplate())),this.element}removeElement(){this.element=null}}class M{constructor({title:e}){this.title=e}getTemplate(){return`<button class="event__reset-btn" type="reset">${this.title}</button>`}getElement(){return this.element||(this.element=e(this.getTemplate())),this.element}removeElement(){this.element=null}}class S{getTemplate(){return'<section class="event__details"></section>'}getElement(){return this.element||(this.element=e(this.getTemplate())),this.element}removeElement(){this.element=null}}class O{constructor({sectionData:e}){this.sectionData=e}getTemplate(){return function(e){const{name:t,title:n}=e;return`<section class="event__section ${t?`event__section--${t}`:""}">\n      <h3 class="event__section-title ${t?`event__section-title--${t}`:""}">${n}</h3>\n    </section>`}(this.sectionData)}getElement(){return this.element||(this.element=e(this.getTemplate())),this.element}removeElement(){this.element=null}}class H{getTemplate(){return'<div class="event__available-offers"></div>'}getElement(){return this.element||(this.element=e(this.getTemplate())),this.element}removeElement(){this.element=null}}class j{constructor({selectorData:e}){this.selectorData=e}getTemplate(){return function(e){const{id:t,name:n,label:s,price:l,isChecked:i}=e;return`<div class="event__offer-selector">\n      <input class="event__offer-checkbox  visually-hidden" id="event-offer-${n}-${t}" type="checkbox" name="event-offer-${n}" ${i?"checked":""}>\n      <label class="event__offer-label" for="event-offer-${n}-${t}">\n        <span class="event__offer-title">${s}</span>\n        &plus;&euro;&nbsp;\n        <span class="event__offer-price">${l}</span>\n      </label>\n    </div>`}(this.selectorData)}getElement(){return this.element||(this.element=e(this.getTemplate())),this.element}removeElement(){this.element=null}}class L{constructor({description:e}){this.description=e}getTemplate(){return`<p class="event__destination-description">${this.description}</p>`}getElement(){return this.element||(this.element=e(this.getTemplate())),this.element}removeElement(){this.element=null}}class B{getTemplate(){return'<div class="event__photos-container"></div>'}getElement(){return this.element||(this.element=e(this.getTemplate())),this.element}removeElement(){this.element=null}}class R{getTemplate(){return'<div class="event__photos-tape"></div>'}getElement(){return this.element||(this.element=e(this.getTemplate())),this.element}removeElement(){this.element=null}}class N{constructor({data:e}){this.data=e}getTemplate(){return function(e){const{src:t,name:n}=e;return`<img class="event__photo" src="${t}" alt="${n}">`}(this.data)}getElement(){return this.element||(this.element=e(this.getTemplate())),this.element}removeElement(){this.element=null}}const P={TAXI:"Taxi",BUS:"Bus",TRAIN:"Train",SHIP:"Ship",DRIVE:"Drive",FLIGHT:"Flight",CHECK_IN:"Check-in",SIGHTSEEING:"Sightseeing",RESTAURANT:"Restaurant"},G=Object.values(P),q=[{dateFrom:"2019-03-18T10:30",dateTo:"2019-03-18T11:00",destination:"Amsterdam",type:P.TAXI,price:20,isFavorite:!0,availableOffers:[{title:"Add luggage",name:"luggage",price:50},{title:"Switch to comfort",name:"comfort",price:80},{title:"Add meal",name:"meal",price:15},{title:"Choose seats",name:"seats",price:5},{title:"Travel by train",name:"train",price:40}],chosenOffers:[{title:"Add luggage",price:50},{title:"Switch to comfort",price:80}],destinationInfo:{description:"Chamonix-Mont-Blanc (usually shortened to Chamonix) is a resort area near the junction of France, Switzerland and Italy. At the base of Mont Blanc, the highest summit in the Alps, it's renowned for its skiing.",pictures:[{src:"img/photos/1.jpg",description:"Event photo"},{src:"img/photos/2.jpg",description:"Event photo"},{src:"img/photos/3.jpg",description:"Event photo"}]}},{dateFrom:"2019-03-18T12:25",dateTo:"2019-03-18T13:35",destination:"Chamonix",type:P.FLIGHT,price:160,isFavorite:!0,chosenOffers:[{title:"Add luggage",price:50},{title:"Switch to comfort",price:80}]},{dateFrom:"2019-03-18T14:30",dateTo:"2019-03-18T16:05",destination:"Chamonix",type:P.DRIVE,price:160,isFavorite:!1,chosenOffers:[{title:"Rent a car",price:200}]},{dateFrom:"2019-03-18T16:20",dateTo:"2019-03-18T17:00",destination:"Chamonix",type:P.CHECK_IN,price:600,isFavorite:!1,chosenOffers:[{title:"Add breakfast",price:50}]}],z=q.map((({destination:e})=>e)).reduce(((e,t)=>e.includes(t)?e:[...e,t]),[]),K=document.querySelector(".trip-controls__filters"),U=document.querySelector(".trip-events"),V=new class{filtersBlockComponent=new n;constructor({filtersContainer:e}){this.filtersContainer=e}init(){t(this.filtersBlockComponent,this.filtersContainer);const e=this.filtersBlockComponent.getElement();l.reverse().forEach((n=>t(new s({filterData:n}),e,"afterbegin")))}}({filtersContainer:K}),X=new class{sortFormComponent=new i;constructor({sortingContainer:e}){this.sortingContainer=e}init(){t(this.sortFormComponent,this.sortingContainer);const e=this.sortFormComponent.getElement();r.forEach((n=>t(new a({sortingData:n}),e)))}}({sortingContainer:U}),W=new class{tripEventsListComponent=new o;constructor({listContainer:e}){this.listContainer=e}init(){t(this.tripEventsListComponent,this.listContainer);const e=this.tripEventsListComponent.getElement();q.forEach((({chosenOffers:n,availableOffers:s,isFavorite:l,destinationInfo:i,...a},r)=>{const o=new m;if(t(o,e),0===r){const e=r+1,l=new _,m=new E,c=new T({typeData:{id:e,type:a.type}}),h=new $,p=new b,u=m.getElement();t(l,o.getElement());const d=l.getElement();t(m,d),t(c,u),t(h,c.getElement()),t(p,h.getElement());const g=p.getElement();G.forEach((n=>t(new y({eventTypeData:{id:e,name:n.toLowerCase(),label:n}}),g)));const f=new w({data:{id:e,type:a.type,destination:a.destination}});t(f,u);const C=new D({id:e});t(C,f.getElement());const F=C.getElement();z.forEach((e=>{t(new x({value:e}),F)})),t(new A({data:{id:e,dateFrom:a.dateFrom,dateTo:a.dateTo}}),u),t(new k({data:{id:e,price:a.price}}),u);const P=new I({color:"blue"}),q=new M({title:"Delete"}),K=new v;t(P,u),t(q,u),t(K,u);const U=new S;t(U,d);const V=U.getElement();if(s?.length){const l=new O({sectionData:{name:"offers",title:"Offers"}});t(l,V);const i=new H;t(i,l.getElement());const a=i.getElement();s.forEach((s=>{t(new j({selectorData:{id:e,name:s.name,label:s.title,price:s.price,isChecked:n.some((e=>e.title===s.title))}}),a)}))}if(t(new O({sectionData:{name:"destination",title:"Destination"}}),V),i?.description&&t(new L({description:i.description}),V),i?.pictures?.length){const e=new B;t(e,V);const n=new R;t(n,e.getElement());const s=n.getElement();i.pictures.forEach((e=>{t(new N({data:{src:e.src,name:e.description}}),s)}))}return}const c=new p({eventData:a});if(t(c,o.getElement()),n.length){const e=new f;t(new g,c.getElement()),t(e,c.getElement());const s=e.getElement();n.forEach((e=>t(new d({offerData:e}),s)))}t(new u({isFavorite:l}),c.getElement()),t(new v,c.getElement())}))}}({listContainer:U});V.init(),X.init(),W.init()})();
//# sourceMappingURL=bundle.bb45e87198e775cb557e.js.map